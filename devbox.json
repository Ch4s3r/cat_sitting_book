{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": [
    "nodejs@20",
    "tailscale"
  ],
  "shell": {
    "init_hook": [
      "npm install"
    ],
    "scripts": {
      "start": [
        "bash -c 'tailscale serve --bg 3000 && trap \"tailscale serve reset > /dev/null 2>&1\" EXIT && npm start'"
      ],
      "build": [
        "npm run build"
      ],
      "serve": [
        "npm run serve"
      ],
      "compress": [
        "mogrify -resize 700 static/img/*",
        "mogrify -quality 40 static/img/*",
        "du -h static/img"
      ],
      "test": [
        "echo 'ğŸ—ï¸  Building Docusaurus...'",
        "npm run build",
        "echo 'âœ… Build successful! Now checking links...'",
        "echo 'ğŸ“ Checking markdown links...'",
        "npx markdown-link-check docs/*.md --config .markdown-link-check.json",
        "echo 'ğŸ–¼ï¸  Checking asset references...'",
        "node scripts/check-assets.js",
        "echo 'ğŸ”— Checking internal page links...'",
        "node scripts/check-internal-links.js",
        "echo 'ğŸ‰ All tests passed!'"
      ]
    }
  }
}